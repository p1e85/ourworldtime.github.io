<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Final Debug Test</title>
    <style>
        body { background-color: #2c3e50; color: white; font-family: sans-serif; padding: 20px; }
        h1 { text-align: center; }
        #multi-clock-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 900px; margin: auto; }
        .mini-clock { background-color: rgba(0, 0, 0, 0.2); border-radius: 10px; padding: 20px; text-align: center; }
        h3 { margin: 0 0 10px 0; font-size: 1.5em; font-weight: 400; }
        .mini-time { font-size: 3em; font-weight: 700; }
        .error-message { color: #ff6b6b; background-color: #1e272e; padding: 20px; border-radius: 10px; white-space: pre-wrap; font-family: monospace; }
    </style>
</head>
<body>
    <h1>Final Debug Test</h1>
    <div id="multi-clock-grid"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // --- Start of Clock Logic ---

                const timeZones = [
                    { name: "New York, Lima", iana: "America/New_York" },
                    { name: "London, Dublin", iana: "Europe/London" },
                    { name: "Moscow, Istanbul", iana: "Europe/Moscow" },
                    { name: "Tokyo, Seoul", iana: "Asia/Tokyo" }
                ];

                const multiClockGrid = document.getElementById('multi-clock-grid');

                function createMiniClock(zone) {
                    const clockEl = document.createElement('div');
                    clockEl.className = 'mini-clock';
                    const nameEl = document.createElement('h3');
                    nameEl.textContent = zone.name;
                    const timeEl = document.createElement('div');
                    timeEl.className = 'mini-time';
                    timeEl.dataset.iana = zone.iana;
                    clockEl.appendChild(nameEl);
                    clockEl.appendChild(timeEl);
                    return clockEl;
                }

                function renderDashboard() {
                    multiClockGrid.innerHTML = '';
                    timeZones.forEach(zoneData => {
                        const clockEl = createMiniClock(zoneData);
                        multiClockGrid.appendChild(clockEl);
                    });
                }

                function updateClocks() {
                    timeZones.forEach(zone => {
                        const timeEl = multiClockGrid.querySelector(`.mini-time[data-iana="${zone.iana}"]`);
                        if (timeEl) {
                            const timeOptions = { timeZone: zone.iana, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
                            // Using 'en-US' which is widely supported
                            timeEl.textContent = new Date().toLocaleTimeString('en-US', timeOptions);
                        }
                    });
                }

                renderDashboard();
                updateClocks();
                setInterval(updateClocks, 1000);

                // --- End of Clock Logic ---
            } catch (error) {
                // If any error occurs in the logic above, display it on the screen
                const grid = document.getElementById('multi-clock-grid');
                grid.innerHTML = `<div class="error-message"><h2>An error occurred:</h2><p>${error.stack}</p></div>`;
                grid.style.gridTemplateColumns = '1fr';
                console.error("CRITICAL ERROR:", error);
            }
        });
    </script>
</body>
</html>
